generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mongodb"
  url      = env("DATABASE_URL")
}

model User {
  id               String       @id @default(auto()) @map("_id") @db.ObjectId
  username         String       @unique
  passwordHash     String
  pluralKey        String?
  overridePluralId String?
  admin            Boolean      @default(false)
  members          UserMember[]
  fields           UserField[]
  slug        String?
  description String?
  visible     Boolean
}

model UserField {
  id     String         @id @default(auto()) @map("_id") @db.ObjectId
  pluralId String @unique
  pluralOwnerId String
  user   User?          @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  userId String?
  description String?
  visible     Boolean
}

model UserMember {
  id            String          @id @default(auto()) @map("_id") @db.ObjectId
  pluralId      String          @unique
  pluralOwnerId String
  user          User            @relation(fields: [userId], references: [id], onDelete: Cascade, onUpdate: Cascade)
  userId        String
  slug        String?
  description String?
  visible     Boolean
}
